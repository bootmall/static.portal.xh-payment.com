webpackJsonp([10,39],{"0xDb":function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(0===arguments.length)return null;var a=t||"{y}-{m}-{d} {h}:{i}:{s}",i=void 0;"object"===(void 0===e?"undefined":(0,x.default)(e))?i=e:(10===(""+e).length&&(e=1e3*parseInt(e)),i=new Date(e));var s={y:i.getFullYear(),m:i.getMonth()+1,d:i.getDate(),h:i.getHours(),i:i.getMinutes(),s:i.getSeconds(),a:i.getDay()};return a.replace(/{(y|m|d|h|i|s|a)+}/g,function(e,t){var a=s[t];return"a"===t?["一","二","三","四","五","六","日"][a-1]:(e.length>0&&a<10&&(a="0"+a),a||0)})}function n(e,t){e=1e3*+e;var a=new Date(e),i=Date.now(),n=(i-a)/1e3;return n<30?"刚刚":n<3600?Math.ceil(n/60)+"分钟前":n<86400?Math.ceil(n/3600)+"小时前":n<172800?"1天前":t?s(e,t):a.getMonth()+1+"月"+a.getDate()+"日"+a.getHours()+"时"+a.getMinutes()+"分"}function r(e){e=null==e?window.location.href:e;var t=e.substring(e.lastIndexOf("?")+1),a={},i=/([^?&=]+)=([^?&=]*)/g;return t.replace(i,function(e,t,i){var s=decodeURIComponent(t),n=decodeURIComponent(i);return n=String(n),a[s]=n,e}),a}function l(e){for(var t=0,a=0;a<e.length;a++)null!=e[a].match(/[^\x00-\xff]/gi)?t+=1:t+=.5;return Math.floor(t)}function o(e){for(var t=[],a=0;a<e.length;a++)e[a]&&t.push(e[a]);return t}function c(e){return e?o((0,y.default)(e).map(function(t){return void 0===e[t]?"":encodeURIComponent(t)+"="+encodeURIComponent(e[t])})).join("&"):""}function u(e){var t=e.split("?")[1];return t?JSON.parse('{"'+decodeURIComponent(t).replace(/"/g,'\\"').replace(/&/g,'","').replace(/=/g,'":"')+'"}'):{}}function d(e){var t=document.createElement("div");return t.innerHTML=e,t.textContent||t.innerText}function m(e,t){return"object"!==(void 0===e?"undefined":(0,x.default)(e))&&(e={}),Array.isArray(t)?t.slice():((0,y.default)(t).forEach(function(a){var i=t[a];"object"===(void 0===i?"undefined":(0,x.default)(i))?e[a]=m(e[a],i):e[a]=i}),e)}function p(e,t,a){if(!(a<=0)){var i=t-e.scrollTop,s=i/a*10;setTimeout(function(){console.log(new Date),e.scrollTop=e.scrollTop+s,e.scrollTop!==t&&p(e,t,a-10)},10)}}function h(e,t){if(e&&t){var a=e.className,i=a.indexOf(t);-1===i?a+=""+t:a=a.substr(0,i)+a.substr(i+t.length),e.className=a}}function f(e){return"start"===e?(new Date).getTime()-7776e6:new Date((new Date).toDateString())}function g(e,t,a){var i=void 0,s=void 0,n=void 0,r=void 0,l=void 0,o=function o(){var c=+new Date-r;c<t&&c>0?i=setTimeout(o,t-c):(i=null,a||(l=e.apply(n,s),i||(n=s=null)))};return function(){for(var s=arguments.length,c=Array(s),u=0;u<s;u++)c[u]=arguments[u];n=this,r=+new Date;var d=a&&!i;return i||(i=setTimeout(o,t)),d&&(l=e.apply(n,c),n=c=null),l}}function v(e){if(!e&&"object"!==(void 0===e?"undefined":(0,x.default)(e)))throw new Error("error arguments","shallowClone");var t=e.constructor===Array?[]:{};return(0,y.default)(e).forEach(function(a){e[a]&&"object"===(0,x.default)(e[a])?(t[a]=e[a].constructor===Array?[]:{},t[a]=v(e[a])):t[a]=e[a]}),t}function _(e){return a("7YgM").dependencies[e]}Object.defineProperty(t,"__esModule",{value:!0}),t.pickerOptions=void 0;var w=a("fZjL"),y=i(w),b=a("pFYg"),x=i(b);t.parseTime=s,t.formatTime=n,t.getQueryObject=r,t.getByteLen=l,t.cleanArray=o,t.param=c,t.param2Obj=u,t.html2Text=d,t.objectMerge=m,t.scrollTo=p,t.toggleClass=h,t.getTime=f,t.debounce=g,t.deepClone=v,t.getVersion=_;t.pickerOptions=[{text:"今天",onClick:function(e){var t=new Date,a=new Date((new Date).toDateString());t.setTime(a.getTime()),e.$emit("pick",[a,t])}},{text:"最近一周",onClick:function(e){var t=new Date((new Date).toDateString()),a=new Date;a.setTime(t.getTime()-6048e5),e.$emit("pick",[a,t])}},{text:"最近一个月",onClick:function(e){var t=new Date((new Date).toDateString()),a=new Date;a.setTime(a.getTime()-2592e6),e.$emit("pick",[a,t])}},{text:"最近三个月",onClick:function(e){var t=new Date((new Date).toDateString()),a=new Date;a.setTime(a.getTime()-7776e6),e.$emit("pick",[a,t])}}]},"7YgM":function(e,t){e.exports={name:"agent-payment",version:"1.0.0",description:"agent payment",author:"bootmall",private:!0,scripts:{dev:"node build/dev-server.js",test:"node build/dev-test.js NODE_ENV=test env_config=test","build:prod":"cd ../static.portal.xh-payment.com/ && git pull origin master && cd - && cross-env NODE_ENV=production env_config=prod node build/build.js && echo 'git pushlist' && cd ../static.portal.xh-payment.com/ && git add . && git commit -m 'publish' && git push -u origin master","build:test":"cd ../test.static.portal.xh-payment.com/ && git pull origin master && cd - && cross-env NODE_ENV=production env_config=sit node build/build.js && echo 'git pushlist' && cd ../test-static.portal.xh-payment.com/ && git add . && git commit -m 'publish' && git push -u origin master","build:sit-preview":"cross-env NODE_ENV=production env_config=sit npm_config_preview=true  npm_config_report=true node build/build.js",lint:"eslint --ext .js,.vue src"},dependencies:{axios:"0.17.1",clipboard:"1.7.1",codemirror:"5.31.0",dropzone:"5.2.0",echarts:"^4.1.0","element-ui":"2.0.7","file-saver":"1.3.3","font-awesome":"4.7.0","js-cookie":"2.2.0",jsonlint:"1.6.2",jszip:"3.1.4",lodash:"latest",mathjs:"^5.1.1",mockjs:"1.0.1-beta3","normalize.css":"7.0.0",npm:"^6.3.0","npm-zepto":"^1.1.7",nprogress:"0.2.0",screenfull:"3.3.2",showdown:"1.8.2",simplemde:"1.11.2",sortablejs:"1.6.1",tinymce:"^4.8.1",vue:"2.5.9","vue-count-to":"1.0.10","vue-echarts":"^3.1.2","vue-i18n":"7.3.2","vue-multiselect":"2.0.6","vue-qr":"^1.3.8","vue-router":"3.0.1","vue-splitpane":"1.0.0",vuedraggable:"2.15.0",vuex:"3.0.1",xlsx:"^0.11.7",zepto:"^1.2.0"},devDependencies:{autoprefixer:"7.1.6","babel-core":"6.26.0","babel-eslint":"8.0.2","babel-loader":"7.1.2","babel-plugin-transform-runtime":"6.23.0","babel-preset-env":"1.6.1","babel-preset-es2015":"^6.24.1","babel-preset-stage-2":"6.24.1","babel-register":"6.26.0",chalk:"2.3.0",commander:"^2.17.1","connect-history-api-fallback":"1.4.0","copy-webpack-plugin":"4.2.0","cross-env":"5.1.1","css-loader":"0.28.7",eslint:"4.11.0","eslint-friendly-formatter":"3.0.0","eslint-import-resolver-webpack":"0.8.3","eslint-loader":"1.9.0","eslint-plugin-html":"3.2.2","eslint-plugin-import":"2.8.0","eventsource-polyfill":"0.9.6",express:"4.16.2","extract-text-webpack-plugin":"3.0.2","file-loader":"0.11.2","friendly-errors-webpack-plugin":"1.6.1","function-bind":"1.1.0","html-webpack-plugin":"2.30.0","http-proxy-middleware":"0.17.4","node-sass":"^4.9.2",opn:"4.0.2","optimize-css-assets-webpack-plugin":"3.2.0",ora:"1.1.0","postcss-loader":"^2.1.6","pushstate-server":"2.1.0",rimraf:"2.6.0","sass-loader":"6.0.6","script-loader":"0.7.2",semver:"5.3.0","style-loader":"0.19.0","svg-sprite-loader":"3.4.1","url-loader":"0.6.2","vue-loader":"13.5.0","vue-style-loader":"3.0.3","vue-template-compiler":"2.5.9",webpack:"3.8.1","webpack-bundle-analyzer":"2.9.0","webpack-dev-middleware":"1.12.0","webpack-hot-middleware":"2.20.0","webpack-merge":"4.1.0"},engines:{node:">= 4.0.0",npm:">= 3.0.0"},browserslist:["> 1%","last 2 versions","not ie <= 8"]}},"9Rej":function(e,t,a){var i=a("kRAu");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);a("rjj0")("e2157a78",i,!0)},Fmtx:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container calendar-list-container"},[a("div",{staticClass:"filter-container"},[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-input",{staticClass:"filter-item select-class",attrs:{placeholder:"商户号",clearable:""},on:{focus:function(t){e.showPasteTxt("userId")}},model:{value:e.listQuery.userId,callback:function(t){e.$set(e.listQuery,"userId",t)},expression:"listQuery.userId"}}),e._v(" "),a("el-input",{staticClass:"filter-item select-class",attrs:{placeholder:"商户帐号",clearable:""},on:{focus:function(t){e.showPasteTxt("username")}},model:{value:e.listQuery.username,callback:function(t){e.$set(e.listQuery,"username",t)},expression:"listQuery.username"}}),e._v(" "),a("el-input",{staticClass:"filter-item select-class",attrs:{placeholder:"父帐号",clearable:""},model:{value:e.listQuery.parentUsername,callback:function(t){e.$set(e.listQuery,"parentUsername",t)},expression:"listQuery.parentUsername"}}),e._v(" "),e.listQuery.parentUsername.length>0?a("el-select",{staticClass:"filter-item select-class",attrs:{placeholder:"下级",filterable:"",clearable:""},model:{value:e.listQuery.child,callback:function(t){e.$set(e.listQuery,"child",t)},expression:"listQuery.child"}},e._l(e.childOptions,function(e,t){return a("el-option",{key:t,attrs:{label:e,value:t}})})):e._e(),e._v(" "),a("el-select",{staticClass:"filter-item select-class",attrs:{placeholder:"状态",filterable:""},model:{value:e.listQuery.status,callback:function(t){e.$set(e.listQuery,"status",t)},expression:"listQuery.status"}},e._l(e.statusOptions,function(e,t){return a("el-option",{key:t,attrs:{label:e,value:t}})})),e._v(" "),a("el-select",{staticClass:"filter-item select-class",attrs:{placeholder:"类型",filterable:""},model:{value:e.listQuery.type,callback:function(t){e.$set(e.listQuery,"type",t)},expression:"listQuery.type"}},e._l(e.typeOptions,function(e,t){return a("el-option",{key:t,attrs:{label:e,value:t}})})),e._v(" "),a("el-select",{staticClass:"filter-item select-class",attrs:{placeholder:"出款通道",filterable:""},model:{value:e.listQuery.remit,callback:function(t){e.$set(e.listQuery,"remit",t)},expression:"listQuery.remit"}},e._l(e.remitOptions,function(e,t){return a("el-option",{key:e.id,attrs:{label:e.channel_name,value:e.id}})})),e._v(" "),a("el-select",{staticClass:"filter-item select-class",attrs:{placeholder:"充值通道"},model:{value:e.listQuery.payChannel,callback:function(t){e.$set(e.listQuery,"payChannel",t)},expression:"listQuery.payChannel"}},e._l(e.payChannelOptions,function(e,t){return a("el-option",{key:e.id,attrs:{label:e.channel_name,value:e.id}})})),e._v(" "),a("el-select",{staticClass:"filter-item select-class",attrs:{placeholder:"分组标签",filterable:""},model:{value:e.listQuery.tagId,callback:function(t){e.$set(e.listQuery,"tagId",t)},expression:"listQuery.tagId"}},e._l(e.tagList,function(e,t){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),e._v(" "),a("el-select",{staticClass:"filter-item select-class",attrs:{placeholder:"开户费缴纳状态",filterable:""},model:{value:e.listQuery.accountOpenFeeStatus,callback:function(t){e.$set(e.listQuery,"accountOpenFeeStatus",t)},expression:"listQuery.accountOpenFeeStatus"}},e._l(e.accountOpenFeeStatusOptions,function(e,t){return a("el-option",{key:t,attrs:{label:e,value:t}})})),e._v(" "),a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],attrs:{type:"primary",icon:"search"},on:{click:e.handleFilter}},[e._v("搜索")]),e._v(" "),a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],attrs:{type:"success",icon:"search"},on:{click:e.handleEditUser}},[e._v("开户")])],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-button-group",[a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"small-padding-btn",attrs:{type:"info",plain:"",icon:"search"},on:{click:function(t){e.switchPayChannelWithQueryForm=0,e.showSwitchPayChannel()}}},[e._v("切充值\n                    ")]),e._v(" "),a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"small-padding-btn",attrs:{type:"info",plain:"",icon:"search"},on:{click:function(t){e.switchPayChannelWithQueryForm=1,e.showSwitchPayChannel()}}},[e._v("切全部\n                    ")])],1),e._v(" "),a("el-button-group",[a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"small-padding-btn",attrs:{type:"warning",plain:"",icon:"search"},on:{click:function(t){e.switchRemitWithQueryForm=0,e.showSwitchRemitChannelDialog()}}},[e._v("切出款\n                    ")]),e._v(" "),a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"small-padding-btn",attrs:{type:"warning",plain:"",icon:"search"},on:{click:function(t){e.switchRemitWithQueryForm=1,e.showSwitchRemitChannelDialog()}}},[e._v("切全部\n                    ")])],1),e._v(" "),a("el-button-group",[a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"small-padding-btn",attrs:{type:"success",plain:"",icon:"search"},on:{click:function(t){e.switchTagWithQueryForm=0,e.showSwitchTagDialog()}}},[e._v("切换组\n                    ")]),e._v(" "),a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"small-padding-btn",attrs:{type:"success",plain:"",icon:"search"},on:{click:function(t){e.switchTagWithQueryForm=1,e.showSwitchTagDialog()}}},[e._v("切全部\n                    ")])],1)],1)],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],key:e.tableKey,staticStyle:{width:"100%"},attrs:{data:e.list,"element-loading-text":"数据加载中，请稍候...",border:"",fit:"",stripe:"","highlight-current-row":"","summary-method":e.getSummaries},on:{"sort-change":e.handleChangeSort,"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"30"}}),e._v(" "),a("el-table-column",{attrs:{label:"商户号"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"link-type",class:{error:"正常"!=t.row.status_str},on:{click:function(a){e.showDetail(t.row)}}},[e._v(e._s(t.row.id))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"link-type",on:{click:function(a){e.showDetail(t.row)}}},[e._v(e._s(t.row.group_str))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"商户帐号"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"link-type",class:{error:"正常"!=t.row.status_str},on:{click:function(a){e.showDetail(t.row)}}},[e._v(e._s(t.row.username))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:" 上级商户"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.parentUserNameOptions[t.row.parent_agent_id]))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"出款通道"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.remit_channel_name))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"分组标签"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.tags,function(t,i){return a("span",{key:i},[e._v(e._s(t.name))])})}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"可用余额",sortable:"custom",prop:"balance",width:"150px;"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(0==t.row.balance?0:t.row.balance))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"冻结余额"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(0==t.row.frozen_balance?0:t.row.frozen_balance))])]}}])}),e._v(" "),e._l(e.payTypeFields,function(t,i){return a("el-table-column",{key:i,attrs:{align:"center",label:t},scopedSlots:e._u([{key:"default",fn:function(t){return[a("em",{class:{error:e.isMerchantPayMethodStatus(t.row.pay_config,i)}},[e._v(e._s(e._f("filterMerchantPayMethod")(t.row.pay_config,i)))])]}}])})}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"下发费率"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.remit_fee))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.status_str))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"开户费"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.account_open_fee))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"开户费缴纳状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.account_open_fee_status_str))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"注册时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"link-type"},[e._v(e._s(t.row.created_at))])]}}])}),e._v(" "),a("el-table-column",{staticClass:"action-btns",attrs:{align:"center",label:"操作",fixed:"right",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{size:"mini",type:"primary"},on:{click:function(a){e.handleDetail(t.row)}}},[e._v("详情\n                ")]),e._v(" "),a("el-dropdown",{attrs:{size:"mini"}},[a("el-button",{attrs:{type:"primary",size:"mini"}},[e._v("\n                        更多操作"),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),e._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown",size:"mini"},slot:"dropdown"},[a("el-dropdown-item",{nativeOn:{click:function(a){e.handleResetLoginPass(t.row)}}},[e._v("重置登录密码")]),e._v(" "),a("el-dropdown-item",{nativeOn:{click:function(a){e.handleClearPass(t.row)}}},[e._v("清除资金密码")]),e._v(" "),t.row.key_2fa_len>0?a("el-dropdown-item",{nativeOn:{click:function(a){e.handleClearGoogle(t.row)}}},[e._v("解绑安全令牌")]):e._e(),e._v(" "),a("el-dropdown-item",{nativeOn:{click:function(a){e.handleSetRate(t.row)}}},[e._v("设置费率")]),e._v(" "),a("el-dropdown-item",{nativeOn:{click:function(a){e.handleSetApiStatus(t.row)}}},[e._v("接口开关")]),e._v(" "),a("el-dropdown-item",{nativeOn:{click:function(a){e.handleUserStatus(t.row)}}},[e._v("修改商户状态")]),e._v(" "),30==t.row.group_id?a("el-dropdown-item",{nativeOn:{click:function(a){e.handleMerchantWeb(t.row)}}},[e._v("添加/编辑扩展资料")]):e._e()],1)],1)]}}])})],2),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.listLoading,expression:"!listLoading"}],staticClass:"pagination-container"},[a("el-pagination",{attrs:{background:"","current-page":e.listQuery.page,"page-sizes":[10,20,30,50],"page-size":e.listQuery.limit,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.$set(e.listQuery,"page",t)}}})],1),e._v(" "),a("el-dialog",{attrs:{title:"切换通道",visible:e.dialogSwitchChannelVisible,width:"600px"},on:{"update:visible":function(t){e.dialogSwitchChannelVisible=t}}},[a("el-form",{attrs:{"label-width":"80px"}},[a("el-form-item",{staticClass:"switchPayChannelForm-payMethodIdList",attrs:{label:"通道类型"}},e._l(e.payTypeOptions,function(t,i){return a("el-checkbox",{key:i,attrs:{label:t},on:{change:e.getAccountListInSwitchPayChannelForm},model:{value:e.switchPayChannelForm.payMethodId[i],callback:function(t){e.$set(e.switchPayChannelForm.payMethodId,i,t)},expression:"switchPayChannelForm.payMethodId[key]"}},[e._v(e._s(t))])})),e._v(" "),a("el-form-item",{directives:[{name:"loading",rawName:"v-loading",value:e.switchPayChannelFormAccountListLoading,expression:"switchPayChannelFormAccountListLoading"}],attrs:{"element-loading-text":"数据加载中，请稍候...",label:"通道",width:"200"}},[a("el-select",{attrs:{placeholder:"选择请选择通道"},model:{value:e.switchPayChannelForm.rechargeChannelId,callback:function(t){e.$set(e.switchPayChannelForm,"rechargeChannelId",t)},expression:"switchPayChannelForm.rechargeChannelId"}},e._l(e.methodFilteredPayChannelOptions,function(e,t){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.switchPayChannelFormAccountListLoading=!1,e.dialogSwitchChannelVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.switchPayChannel()}}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"切换出款通道",visible:e.dialogSwitchRemitVisible,width:"500px"},on:{"update:visible":function(t){e.dialogSwitchRemitVisible=t}}},[a("el-form",{attrs:{"label-width":"80px"}},[a("el-form-item",{attrs:{label:"出款通道",width:"200"}},[a("el-select",{attrs:{placeholder:"请选择出款通道"},model:{value:e.remitIdSwitchTo,callback:function(t){e.remitIdSwitchTo=t},expression:"remitIdSwitchTo"}},e._l(e.remitOptions,function(e,t){return a("el-option",{key:e.id,attrs:{label:e.channel_name,value:e.id}})}))],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogSwitchRemitVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.switchRemit()}}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"切换分组",visible:e.dialogSwitchTagVisible,width:"500px"},on:{"update:visible":function(t){e.dialogSwitchTagVisible=t}}},[a("el-form",{attrs:{"label-width":"80px"}},[a("el-form-item",{attrs:{label:"新增分组",width:"200"}},[a("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{placeholder:"分组名称"},model:{value:e.newTag,callback:function(t){e.newTag=t},expression:"newTag"}}),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.addTag()}}},[e._v("确 定")])],1),e._v(" "),a("el-form-item",{attrs:{label:"选择分组"}},[a("el-select",{staticClass:"filter-item",attrs:{placeholder:"分组标签"},model:{value:e.tagsSwitchTo,callback:function(t){e.tagsSwitchTo=t},expression:"tagsSwitchTo"}},e._l(e.tagList,function(e,t){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogSwitchTagVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.switchTag()}}},[e._v("确定切换")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"设置费率",visible:e.rateVisible,width:"53%"},on:{"update:visible":function(t){e.rateVisible=t}}},[a("el-form",{attrs:{model:e.rateForm}},[a("el-form-item",{attrs:{label:"出款手续费(元/每笔)：","label-width":"180px"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{size:"small"},model:{value:e.rateForm.remit_fee,callback:function(t){e.$set(e.rateForm,"remit_fee",t)},expression:"rateForm.remit_fee"}}),e._v(" "),a("span",{staticStyle:{"margin-left":"20px"}},[e._v("可填区间")]),e._v(" "),a("span",{domProps:{textContent:e._s(e.userInfo.parent_remit_fee)}}),e._v(" ~\n                "),e.userInfo.lower_remit_fee>0?a("span",{domProps:{textContent:e._s(e.userInfo.lower_remit_fee)}}):a("span")],1),e._v(" "),e._l(e.payMethodsOptions,function(t,i){return a("el-form-item",{key:i,staticClass:"el-row-rate",attrs:{"label-width":"100px",label:t+"："}},[a("el-input",{staticStyle:{width:"200px"},attrs:{size:"small"},on:{change:function(t){e.checkRate(e.rateForm.pay_methods[i],i)}},model:{value:e.rateForm.pay_methods[i],callback:function(t){e.$set(e.rateForm.pay_methods,i,t)},expression:"rateForm.pay_methods[key]"}}),e._v(" "),a("el-switch",{staticStyle:{"margin-left":"20px"},attrs:{"active-text":"启用","inactive-text":"停用","active-color":"#13ce66","inactive-color":"#ff4949","active-value":"1","inactive-value":"0"},on:{change:function(t){e.onMethodStatusChange(i)}},model:{value:e.methodStatus[i],callback:function(t){e.$set(e.methodStatus,i,t)},expression:"methodStatus[key]"}}),e._v(" "),a("span",{staticStyle:{"margin-left":"5px"}},[e._v("可填区间")]),e._v(" "),a("span",{domProps:{textContent:e._s(e.methods.min_rate[i])}}),e._v(" ~\n                "),e.methods.max_rate[i]>0?a("span",{domProps:{textContent:e._s(e.methods.max_rate[i])}}):a("span"),e._v(" "),a("el-select",{attrs:{placeholder:"到账",size:"mini"},model:{value:e.settlementType[i],callback:function(t){e.$set(e.settlementType,i,t)},expression:"settlementType[key]"}},e._l(e.settlementTypeOptions,function(e,t){return a("el-option",{key:e,attrs:{label:e,value:e}})}))],1)})],2),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.rateVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.updateRate}},[e._v("提交")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"修改商户状态",visible:e.statusVisible,width:"40%"},on:{"update:visible":function(t){e.statusVisible=t}}},[e._l(e.userStatusOptions,function(t,i){return a("el-radio",{key:i,attrs:{label:i},model:{value:e.statusForm.newStatus,callback:function(t){e.$set(e.statusForm,"newStatus",t)},expression:"statusForm.newStatus"}},[e._v(e._s(t))])}),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.statusVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.updateUserStatus}},[e._v("确 定")])],1)],2),e._v(" "),a("el-dialog",{attrs:{title:"修改API开关",visible:e.apiVisible,width:"40%"},on:{"update:visible":function(t){e.apiVisible=t}}},[[a("el-form",{attrs:{model:e.apiForm}},[a("el-form-item",{attrs:{label:"API出款免审核最高金额：","label-width":"180px"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{size:"small"},model:{value:e.apiForm.allow_api_fast_remit,callback:function(t){e.$set(e.apiForm,"allow_api_fast_remit",t)},expression:"apiForm.allow_api_fast_remit"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"手工出款免审核最高金额：","label-width":"180px"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{size:"small"},model:{value:e.apiForm.allow_manual_fast_remit,callback:function(t){e.$set(e.apiForm,"allow_manual_fast_remit",t)},expression:"apiForm.allow_manual_fast_remit"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"支持接口充值：","label-width":"180px"}},[a("el-switch",{staticStyle:{"margin-left":"20px"},attrs:{"active-text":"启用","inactive-text":"停用","active-color":"#13ce66","inactive-color":"#ff4949","active-value":"1","inactive-value":"0"},model:{value:e.apiForm.allow_api_recharge,callback:function(t){e.$set(e.apiForm,"allow_api_recharge",t)},expression:"apiForm.allow_api_recharge"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"支持接口提款：","label-width":"180px"}},[a("el-switch",{staticStyle:{"margin-left":"20px"},attrs:{"active-text":"启用","inactive-text":"停用","active-color":"#13ce66","inactive-color":"#ff4949","active-value":"1","inactive-value":"0"},model:{value:e.apiForm.allow_api_remit,callback:function(t){e.$set(e.apiForm,"allow_api_remit",t)},expression:"apiForm.allow_api_remit"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"支持手工充值：","label-width":"180px"}},[a("el-switch",{staticStyle:{"margin-left":"20px"},attrs:{"active-text":"启用","inactive-text":"停用","active-color":"#13ce66","inactive-color":"#ff4949","active-value":"1","inactive-value":"0"},model:{value:e.apiForm.allow_manual_recharge,callback:function(t){e.$set(e.apiForm,"allow_manual_recharge",t)},expression:"apiForm.allow_manual_recharge"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"支持手工提款：","label-width":"180px"}},[a("el-switch",{staticStyle:{"margin-left":"20px"},attrs:{"active-text":"启用","inactive-text":"停用","active-color":"#13ce66","inactive-color":"#ff4949","active-value":"1","inactive-value":"0"},model:{value:e.apiForm.allow_manual_remit,callback:function(t){e.$set(e.apiForm,"allow_manual_remit",t)},expression:"apiForm.allow_manual_remit"}})],1)],1)],e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.apiVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.updateApi}},[e._v("确 定")])],1)],2),e._v(" "),a("el-dialog",{attrs:{title:"解绑商户安全令牌",visible:e.clearGoogleVisible,width:"600px","close-on-click-modal":!1},on:{"update:visible":function(t){e.clearGoogleVisible=t},close:e.close}},[a("el-form",[[a("el-form-item",{staticStyle:{"margin-top":"20px",width:"400px"},attrs:{label:"操作员安全令牌：","label-width":"180px"}},[a("el-input",{staticStyle:{width:"300px"},attrs:{size:"small",type:"text"},model:{value:e.googleCode,callback:function(t){e.googleCode=t},expression:"googleCode"}})],1)]],2),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.close}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.handleUnbind}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:e.PasteTxtTitle,visible:e.PasteTxtVisible,width:"40%"},on:{"update:visible":function(t){e.PasteTxtVisible=t}}},[a("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"请粘贴要搜索的内容,多个以英文逗号或换行分割都可以",type:"textarea",rows:3},model:{value:e.PasteTxtVal,callback:function(t){e.PasteTxtVal=t},expression:"PasteTxtVal"}}),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.PasteTxtVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.PasteTxt}},[e._v("提交")])],1)],1),e._v(" "),a("add-merchant-web",{attrs:{"merchant-id":e.web_merchant_id,"merchant-name":e.web_merchant_name},on:{initMerchantIdEvent:e.initMerchantId}})],1)},s=[],n={render:i,staticRenderFns:s};t.a=n},FzBT:function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=a("cAgV"),n=i(s),r=(a("0xDb"),a("3pLw")),l=i(r);t.default={name:"vue_add_merchant_web",directives:{waves:n.default},props:{merchantId:{type:String,default:""},merchantName:{type:String,default:""}},watch:{merchantId:function(e,t){null!=e&&(this.addFrom.merchant_id=e,this.addFrom.merchant_name=this.merchantName,this.addMerchantWebVisible=!0,this.getDetail())}},data:function(){return{addMerchantWebVisible:!1,addFrom:{merchant_id:null,merchant_name:null,login_username:null,login_password:null,url:null}}},methods:{getDetail:function(){var e=this;l.default.post("/admin/user/merchant-web-detail",{merchant_id:e.merchantId}).then(function(t){0==t.code&&(e.addFrom.login_username=t.data.login_username,e.addFrom.login_password=t.data.login_password,e.addFrom.url=t.data.url)})},handleAdd:function(){var e=this;if(!/http(s)?:\/\/([\w-]+\.)+[\w-]+(\/[\w- .\/?%&=]*)?/.test(e.addFrom.url))return e.$message.error({message:"url格式不正确"}),!1;l.default.post("/admin/user/add-merchant-web",e.addFrom).then(function(t){e.close(),0==t.code?e.$message.success({message:"操作成功"}):e.$message.error({message:t.message})})},close:function(){this.addMerchantWebVisible=!1,this.addFrom={merchant_id:null,merchant_name:null,login_username:null,login_password:null,url:null},this.$emit("initMerchantIdEvent")}}}},JRTM:function(e,t,a){var i=a("RLtr");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);a("rjj0")("f3d6b8b2",i,!0)},PJ2m:function(e,t,a){"use strict";function i(e){a("JRTM")}Object.defineProperty(t,"__esModule",{value:!0});var s=a("oyhe"),n=a.n(s),r=a("Fmtx"),l=a("VU/8"),o=i,c=l(n.a,r.a,!1,o,"data-v-7042c9c8",null);t.default=c.exports},RLtr:function(e,t,a){t=e.exports=a("FZ+f")(!1),t.push([e.i,".action-btns a[data-v-7042c9c8]{margin-left:5px}.pagination-container[data-v-7042c9c8]{margin-top:10px}.el-tag[data-v-7042c9c8]{margin-top:10px;margin-left:10px}.el-table td[data-v-7042c9c8],.el-table th[data-v-7042c9c8]{padding:5px 0!important}.filter-container .filter-item[data-v-7042c9c8]{margin-bottom:5px;width:120px}.small-padding-btn[data-v-7042c9c8]{padding:12px 5px!important}.dialog-footer[data-v-7042c9c8]{text-align:center}.recharge-fee-pop .el-button--mini[data-v-7042c9c8]{padding:2px 4px}.error[data-v-7042c9c8]{color:#f56c6c}.el-row-rate .el-select[data-v-7042c9c8]{width:80px;margin-left:10px}.switchPayChannelForm-payMethodIdList .el-checkbox[data-v-7042c9c8]{width:120px}.switchPayChannelForm-payMethodIdList .el-checkbox+.el-checkbox[data-v-7042c9c8]{margin-left:0!important}.el-dropdown-menu--mini .el-dropdown-menu__item[data-v-7042c9c8]{line-height:36px!important;font-size:14px!important}.select-class[data-v-7042c9c8]{width:13%!important}",""])},V3Zo:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:"添加/编辑商户扩展资料",visible:e.addMerchantWebVisible,width:"600px","close-on-click-modal":!1},on:{"update:visible":function(t){e.addMerchantWebVisible=t},close:e.close}},[a("el-form",{model:{value:e.addFrom,callback:function(t){e.addFrom=t},expression:"addFrom"}},[[a("el-form-item",{staticStyle:{"margin-top":"20px",width:"400px"},attrs:{label:"商户编号：","label-width":"180px"}},[e._v("\n                "+e._s(e.merchantId)+"\n            ")]),e._v(" "),a("el-form-item",{staticStyle:{"margin-top":"20px",width:"400px"},attrs:{label:"商户名称：","label-width":"180px"}},[e._v("\n                "+e._s(e.merchantName)+"\n            ")]),e._v(" "),a("el-form-item",{staticStyle:{"margin-top":"20px",width:"400px"},attrs:{label:"商户平台地址：","label-width":"180px"}},[a("el-input",{staticStyle:{width:"300px"},attrs:{size:"small"},model:{value:e.addFrom.url,callback:function(t){e.$set(e.addFrom,"url",t)},expression:"addFrom.url"}})],1),e._v(" "),a("el-form-item",{staticStyle:{"margin-top":"20px",width:"400px"},attrs:{label:"登陆名称：","label-width":"180px"}},[a("el-input",{staticStyle:{width:"300px"},attrs:{size:"small"},model:{value:e.addFrom.login_username,callback:function(t){e.$set(e.addFrom,"login_username",t)},expression:"addFrom.login_username"}})],1),e._v(" "),a("el-form-item",{staticStyle:{"margin-top":"20px",width:"400px"},attrs:{label:"登陆密码：","label-width":"180px"}},[a("el-input",{staticStyle:{width:"300px"},attrs:{size:"small"},model:{value:e.addFrom.login_password,callback:function(t){e.$set(e.addFrom,"login_password",t)},expression:"addFrom.login_password"}})],1)]],2),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.close}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.handleAdd}},[e._v("确 定")])],1)],1)},s=[],n={render:i,staticRenderFns:s};t.a=n},XZlg:function(e,t,a){t=e.exports=a("FZ+f")(!1),t.push([e.i,".waves-ripple{position:absolute;border-radius:100%;background-color:rgba(0,0,0,.15);background-clip:padding-box;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-transform:scale(0);-ms-transform:scale(0);transform:scale(0);opacity:1}.waves-ripple.z-active{opacity:0;-webkit-transform:scale(2);-ms-transform:scale(2);transform:scale(2);-webkit-transition:opacity 1.2s ease-out,-webkit-transform .6s ease-out;transition:opacity 1.2s ease-out,-webkit-transform .6s ease-out;transition:opacity 1.2s ease-out,transform .6s ease-out;transition:opacity 1.2s ease-out,transform .6s ease-out,-webkit-transform .6s ease-out}",""])},cAgV:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("jdeu"),s=function(e){return e&&e.__esModule?e:{default:e}}(i),n=function(e){e.directive("waves",s.default)};window.Vue&&(window.waves=s.default,Vue.use(n)),s.default.install=n,t.default=s.default},ctMr:function(e,t,a){var i=a("XZlg");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);a("rjj0")("81d72750",i,!0)},jdeu:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("woOf"),s=function(e){return e&&e.__esModule?e:{default:e}}(i);a("ctMr"),t.default={bind:function(e,t){e.addEventListener("click",function(a){var i=(0,s.default)({},t.value),n=(0,s.default)({ele:e,type:"hit",color:"rgba(0, 0, 0, 0.15)"},i),r=n.ele;if(r){r.style.position="relative",r.style.overflow="hidden";var l=r.getBoundingClientRect(),o=r.querySelector(".waves-ripple");switch(o?o.className="waves-ripple":(o=document.createElement("span"),o.className="waves-ripple",o.style.height=o.style.width=Math.max(l.width,l.height)+"px",r.appendChild(o)),n.type){case"center":o.style.top=l.height/2-o.offsetHeight/2+"px",o.style.left=l.width/2-o.offsetWidth/2+"px";break;default:o.style.top=a.pageY-l.top-o.offsetHeight/2-document.body.scrollTop+"px",o.style.left=a.pageX-l.left-o.offsetWidth/2-document.body.scrollLeft+"px"}return o.style.backgroundColor=n.color,o.className="waves-ripple z-active",!1}},!1)}}},kRAu:function(e,t,a){t=e.exports=a("FZ+f")(!1),t.push([e.i,"",""])},oyhe:function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=a("mvHQ"),n=i(s),r=a("Dd8w"),l=i(r),o=a("cAgV"),c=i(o),u=(a("0xDb"),a("X2Oc")),d=(i(u),a("3pLw")),m=i(d),p=a("NYxO"),h=a("vLXu"),f=i(h);t.default={name:"vue_merchant_list_nocache",directives:{waves:c.default},components:{addMerchantWeb:f.default},data:function(){return{rules:{},list:null,total:null,listLoading:!0,listQuery:{page:1,limit:10,importance:void 0,dateStart:null,dateEnd:null,orderNo:null,userId:null,username:null,parentUsername:"",status:null,accountOpenFeeStatus:null,type:null,remit:null,payChannel:null,tagId:"",sort:"",appIds:[],child:null},switchPayChannelForm:{payMethodId:{},rechargeChannelId:"",appIds:[]},switchPayChannelFormAccountListLoading:!1,methodFilteredPayChannelOptions:[],dialogSwitchChannelVisible:!1,newTag:"",tagList:[],filteredTagList:[],tagsSwitchTo:"",dialogSwitchTagVisible:!1,dialogSwitchRemitVisible:!1,switchPayChannelWithQueryForm:!1,switchRemitWithQueryForm:!1,switchTagWithQueryForm:!1,remitIdSwitchTo:"",currentMerchantRechargeConfigs:[],summery:[],multipleSelection:[],tableKey:0,constFalse:!1,constTrue:!0,statusOptions:[],typeOptions:[],payTypeOptions:[],payTypeFields:[],remitOptions:[],payChannelOptions:[],parentUserNameOptions:[],aviableRemitOptions:[],aviablePayChannelOptions:[],accountOpenFeeStatusOptions:[],quotaVisible:!1,emailVisible:!1,ipVisible:!1,agentVisible:!1,rateVisible:!1,statusVisible:!1,userInfo:{},methods:{},methodStatus:{},payMethodsOptions:{},agentOptions:[],remitMaxFee:5,rechargeMaxRate:.3,settlementType:{},settlementTypeOptions:[],remitFeeCanBeZero:0,rechargeFeeCanBeZero:0,userStatusOptions:{},statusForm:{oldStatus:null,newStatus:null},rateForm:{channel_id:null,remit_channel_id:null,parent_agent_id:null,remit_fee:0,pay_methods:{}},apiVisible:!1,apiForm:{allow_api_fast_remit:"0",allow_manual_fast_remit:"0",allow_api_recharge:"1",allow_api_remit:"1",allow_manual_recharge:"1",allow_manual_remit:"1"},childOptions:["直属下级","所有下级"],pickerOptions:{disabledDate:function(e){return e.getTime()>Date.now()},shortcuts:[{text:"今天",onClick:function(e){e.$emit("pick",new Date)}},{text:"昨天",onClick:function(e){var t=new Date;t.setTime(t.getTime()-864e5),e.$emit("pick",t)}},{text:"一周前",onClick:function(e){var t=new Date;t.setTime(t.getTime()-6048e5),e.$emit("pick",t)}}]},googleCode:null,clearGoogleVisible:!1,merchant_id:null,PasteTxtVisible:!1,PasteTxtVal:"",PasteTxtField:"",PasteTxtTitle:"请先选择粘贴内容",web_merchant_id:null,web_merchant_name:null}},filters:{filterMerchantPayMethod:function(e,t){if(e&&t){var a="";return void 0!==e[t]&&(0==e[t].rate&&(e[t].rate="-"),a=e[t].rate+" "+e[t].channel_account_name),a}}},created:function(){this.getFormOptions(),this.getList()},computed:(0,l.default)({},(0,p.mapGetters)(["roles","uid","user"])),methods:{isMerchantPayMethodStatus:function(e,t){return!e||!t||(void 0===e[t]||void 0===e[t].status||1!=e[t].status)},handleSelectionChange:function(e){var t=this;t.multipleSelection=e,t.listQuery.appIds=[],t.multipleSelection.forEach(function(e){t.listQuery.appIds.push(e.id)})},handleChangeSort:function(e,t,a){this.listQuery.sort="","ascending"==e.order?this.listQuery.sort=e.prop+"+":"descending"==e.order&&(this.listQuery.sort=e.prop+"-"),this.getList()},getList:function(){var e=this;e.listLoading=!0,null!=e.listQuery.parentUsername&&0!=e.listQuery.parentUsername.length||(e.listQuery.child=null),m.default.post("/admin/user/list",e.listQuery).then(function(t){e.listLoading=!1,0!=t.code?e.$message.error({message:t.message}):(e.list=t.data.data,e.summery=t.data.summery,e.total=t.data.pagination.total,e.parentUserNameOptions=t.data.parentUserNameOptions,e.listQuery.appIds=[])},function(t){e.listLoading=!1,e.$message.error({message:t.message})})},getUserEditDetail:function(e,t){var a=this;a.listLoading=!0,m.default.post("/admin/user/detail",{merchantId:e.id}).then(function(e){if(a.listLoading=!1,0!=e.code)a.$message.error({message:e.message});else{a.userInfo=e.data.userInfo,a.methods=e.data.methods,a.channelOptions=e.data.channelOptions,a.userStatusOptions=e.data.userStatusOptions,a.agentOptions=e.data.agentOptions,a.payMethodsOptions=e.data.payMethodsOptions,a.settlementType=e.data.methods.settlement_type;var i={};for(var s in e.data.methods.status)i[s]=e.data.methods.status[s].toString();a.methodStatus=i,a.apiForm.user_id=a.userInfo.id,a.apiForm.allow_api_fast_remit=a.userInfo.allow_api_fast_remit+"",a.apiForm.allow_manual_fast_remit=a.userInfo.allow_manual_fast_remit+"",a.apiForm.allow_api_recharge=a.userInfo.allow_api_recharge+"",a.apiForm.allow_api_remit=a.userInfo.allow_api_remit+"",a.apiForm.allow_manual_recharge=a.userInfo.allow_manual_recharge+"",a.apiForm.allow_manual_remit=a.userInfo.allow_manual_remit+"",t&&t()}})},filterTagList:function(e){this.filteredTagList=this.tagList.filter(function(t){return t.pinyin.indexOf(e)>-1||t.name.indexOf(e)>-1})},getTagList:function(){var e=this;m.default.post("/admin/user/tag-list").then(function(t){0!=t.code?e.$message.error({message:t.message}):e.tagList=t.data},function(t){e.$message.error({message:t.message})})},showSwitchTagDialog:function(e){var t=this;if(0==t.switchTagWithQueryForm&&0==this.multipleSelection.length)return void t.$message.error({message:"请先勾选要切换的商户"});t.dialogSwitchTagVisible=!0,t.getTagList()},addTag:function(){var e=this;if(console.log("self.newTag",e.newTag),!e.newTag)return void e.$message.error({message:"请填写正确的分组"});m.default.post("/admin/user/add-tag",{tag:e.newTag}).then(function(t){0!=t.code?e.$message.error({message:t.message}):(e.$message.success({message:t.message}),e.tagList.push(t.data))},function(t){e.$message.error({message:t.message})})},switchTag:function(){var e=this;if(console.log("self.tagsSwitchTo",e.tagsSwitchTo),!e.tagsSwitchTo)return void e.$message.error({message:"请选择正确的分组"});var t=e.listQuery;1==e.switchTagWithQueryForm&&(t.appIds=[]),t.tagIdSwitchTo=e.tagsSwitchTo,console.log(t),m.default.post("/admin/user/switch-tag",t).then(function(t){0!=t.code?e.$message.error({message:t.message}):(e.$message.success({message:t.message}),e.dialogSwitchTagVisible=!1,""!=e.listQuery.tagId&&(e.listQuery.tagId=""),e.getList())},function(t){e.$message.error({message:t.message})})},getAccountListInSwitchPayChannelForm:function(){var e=this;e.switchPayChannelFormAccountListLoading=!0;var t=[];for(var a in e.switchPayChannelForm.payMethodId)e.switchPayChannelForm.payMethodId[a]&&t.push(a);if(0==t.length)return void(e.switchPayChannelFormAccountListLoading=!1);m.default.post("/admin/user/channel-account-list",{methodId:t}).then(function(t){0!=t.code?e.$message.error({message:t.message}):(e.switchPayChannelForm.rechargeChannelId="",e.methodFilteredPayChannelOptions=t.data,0==t.data.length&&e.$message.error({message:"没有符合筛选条件的通道账户！"})),e.switchPayChannelFormAccountListLoading=!1},function(t){e.$message.error({message:t.message}),e.switchPayChannelFormAccountListLoading=!1})},showSwitchPayChannel:function(){var e=this;if(0==e.switchPayChannelWithQueryForm&&0==this.multipleSelection.length)return void e.$message.error({message:"请先勾选要切换的商户"});e.initSwitchPayFormMethods(),e.dialogSwitchChannelVisible=!0},switchPayChannel:function(){var e=this;if(!e.switchPayChannelForm.rechargeChannelId)return void e.$message.error({message:"请选择收款方式及收款渠道"});var t=e.listQuery;t.switchPayChannelForm=JSON.parse((0,n.default)(e.switchPayChannelForm)),1==e.switchPayChannelWithQueryForm&&(t.appIds=[]);var a=[];for(var i in e.switchPayChannelForm.payMethodId)e.switchPayChannelForm.payMethodId[i]&&a.push(i);if(!a)return void e.$message.error({message:"请选择收款方式及收款渠道"});t.switchPayChannelForm.payMethodId=a,e.initSwitchPayFormMethods(),console.log((0,n.default)(t)),m.default.post("/admin/user/switch-recharge-channel",t).then(function(t){0!=t.code?e.$message.error({message:t.message}):(e.$message.success({message:"通道切换成功"}),e.methodFilteredPayChannelOptions=[],e.listQuery.payChannel="",e.switchPayChannelForm.rechargeChannelId="",e.getList(),e.dialogSwitchChannelVisible=!1)},function(t){e.$message.error({message:t.message})})},switchPayMedhod:function(e,t){this.listQuery.payMedhod=e,this.getList(),console.log(e,t)},initSwitchPayFormMethods:function(){console.log("initSwitchPayFormMethods");var e=this;e.switchPayChannelForm.payMethodId={};for(var t in e.payTypeFields)e.switchPayChannelForm.payMethodId[t]=!1},showSwitchRemitChannelDialog:function(){var e=this;if(0==e.switchRemitWithQueryForm&&0==this.multipleSelection.length)return void e.$message.error({message:"请先勾选要切换的商户"});e.dialogSwitchRemitVisible=!0},switchRemit:function(){console.log(this.multipleSelection);var e=this;if(!e.remitIdSwitchTo)return void e.$message.error({message:"请选择出款渠道"});var t=e.listQuery;t.remitIdSwitchTo=e.remitIdSwitchTo,1==e.switchRemitWithQueryForm&&(t.appIds=[]),console.log(t),m.default.post("/admin/user/switch-remit-channel",t).then(function(t){0!=t.code?e.$message.error({message:t.message}):(e.dialogSwitchRemitVisible=!1,e.$message.success({message:"通道切换成功"}),e.methodFilteredPayChannelOptions=[],e.listQuery.remit="",e.getList())},function(t){e.$message.error({message:t.message})})},getFormOptions:function(){var e=this;m.default.post("/admin/user/form-option-list").then(function(t){if(0!=t.code)e.$message.error({message:t.message});else{e.statusOptions=t.data.user_status,e.accountOpenFeeStatusOptions=t.data.account_open_fee_status,e.typeOptions=t.data.user_type,e.payTypeOptions=t.data.pay_method,e.aviableRemitOptions=t.data.channel_can_remit,e.aviablePayChannelOptions=t.data.channel_can_recharge,e.remitOptions=t.data.all_channel,e.payChannelOptions=t.data.all_channel,e.tagList=e.filteredTagList=t.data.tags,e.remitMaxFee=t.data.remitMaxFee,e.rechargeMaxRate=t.data.rechargeMaxRate,e.settlementTypeOptions=t.data.settlementType,e.rechargeFeeCanBeZero=t.data.rechargeFeeCanBeZero,e.remitFeeCanBeZero=t.data.remitFeeCanBeZero;var a={};for(var i in t.data.pay_method)"__ALL__"!=i&&(a[i]=t.data.pay_method[i]);e.payTypeFields=a}},function(t){e.$message.error({message:t.message})})},handleResetLoginPass:function(e){var t=this;t.$confirm("此操作将重置用户密码, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var a={merchantId:e.id,type:5};m.default.post("/admin/user/clear-unbind-update",a).then(function(e){0==e.code?t.$message.success({message:"登录密码重置成功"}):(t.$message.error({message:e.message}),t.getList())})}).catch(function(){t.$message({type:"warning",message:"已取消操作"})})},handleClearPass:function(e){if(e.financial_password_len<=0)return void this.$message.error({message:"该商户还没有设置资金密码"});var t=this;t.$confirm("此操作将清除资金密码, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var a={merchantId:e.id,type:1};m.default.post("/admin/user/clear-unbind-update",a).then(function(e){0==e.code?t.$message.success({message:"资金密码已清除"}):(t.$message.error({message:e.message}),t.getList())})}).catch(function(){t.$message({type:"warning",message:"已取消操作"})})},handleUnbind:function(e){if(e.key_2fa_len<=0)return void this.$message.error({message:"该商户还没有绑定安全令牌"});var t=this;if(null==t.googleCode||0==t.googleCode.length)return void t.$message.error({message:"请输入安全令牌"});t.$confirm("此操作将清解绑安全令牌, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e={merchantId:t.merchant_id,googleCode:t.googleCode,type:2};m.default.post("/admin/user/clear-unbind-update",e).then(function(e){t.close(),0==e.code?(t.$message.success({message:"安全令牌已解绑"}),t.getList()):t.$message.error({message:e.message})})}).catch(function(){t.$message({type:"warning",message:"已取消操作"})})},onMethodStatusChange:function(e){},handleSetRate:function(e){var t=this;t.getUserEditDetail(e,function(){t.rateForm.remit_fee=t.userInfo.remit_fee,t.rateForm.channel_id=t.userInfo.channel_account_id,t.rateForm.remit_channel_id=t.userInfo.remit_channel_account_id,t.rateForm.parent_agent_id=t.userInfo.parent_agent_id;for(var e in t.methods.rate)t.rateForm.pay_methods[e]=t.methods.rate[e];t.rateVisible=!0})},handleSetApiStatus:function(e){console.log(e);var t=this;t.getUserEditDetail(e,function(){t.apiVisible=!0})},updateApi:function(){var e=this;m.default.post("/admin/user/update-api",e.apiForm).then(function(t){0!=t.code?e.$message.error({message:t.message}):(e.$message.success({message:"更新成功"}),e.apiVisible=!1)})},checkRate:function(e,t){var a=this;return a.methodStatus[t]="0",a.rechargeFeeCanBeZero&&(a.methodStatus[t]="1"),e>0&&(e>this.rechargeMaxRate?a.$message.error({message:"收款费率不能大于系统设置最大费率:"+a.rechargeMaxRate}):a.methodStatus[t]="1"),e<a.methods.min_rate[t]&&"1"==a.methodStatus[t]?void a.$message.error({message:a.methods.name[t]+"费率小于上级"}):!(a.methods.max_rate[t]>0&&e>a.methods.max_rate[t]&&"1"==a.methodStatus[t])||void a.$message.error({message:a.methods.name[t]+"费率大于下级"})},updateRate:function(){var e=this;if(e.rateForm.remit_fee<e.userInfo.parent_remit_fee)return void this.$message.error({message:"出款费率"+e.rateForm.remit_fee+"不能小于上级"+e.userInfo.parent_remit_fee});if(e.userInfo.lower_remit_fee>0&&e.rateForm.remit_fee>e.userInfo.lower_remit_fee)return void this.$message.error({message:"出款费率"+e.rateForm.remit_fee+"不能大于下级"+e.userInfo.lower_remit_fee});if(parseFloat(e.rateForm.remit_fee)>parseFloat(e.remitMaxFee))return void this.$message.error({message:"出款费率"+e.rateForm.remit_fee+"不能大于系统设置最大结算手续费:"+e.remitMaxFee});var t=[],a=0;for(var i in e.rateForm.pay_methods){var s=e.rateForm.pay_methods[i];"1"!=e.methodStatus[i]||e.checkRate(s,i)||(a=1),t.push({id:i,rate:s,status:e.methodStatus[i],settlement_type:e.settlementType[i]})}if(1==a)return void e.$message.error({message:"有收款费率错误！请检查"});if(0==t.length)return void e.$message.error({message:"请填写收款费率！"});var n={merchantId:e.userInfo.id,channelId:e.rateForm.channel_id,remitChannelId:e.rateForm.remit_channel_account_id,parent_agent_id:e.rateForm.parent_agent_id,remit_fee:e.rateForm.remit_fee,appSecrets:e.rateForm.app_secrets,pay_methods:t,remitQuotaPerday:e.rateForm.remit_quota_perday,rechargeQuotaPerday:e.rateForm.recharge_quota_perday,rechargeQuotaPertime:e.rateForm.recharge_quota_pertime,remitQuotaPertime:e.rateForm.remit_quota_pertime};m.default.post("/admin/user/update-rate",n).then(function(t){0!=t.code?e.$message.error({message:t.message}):(e.getList(),e.$message.success({message:"编辑成功"}),e.rateVisible=!1)})},handleUserStatus:function(e){var t=this;t.getUserEditDetail(e,function(){t.statusVisible=!0,t.statusForm.oldStatus=t.statusForm.newStatus=e.status.toString()})},updateUserStatus:function(){var e=this;if(e.statusForm.newStatus==e.statusForm.oldStatus)return e.statusVisible=!1;var t={status:e.statusForm.newStatus,merchantId:e.userInfo.id,type:3};m.default.post("/admin/user/clear-unbind-update",t).then(function(t){0!=t.code?e.$message.error({message:t.message}):(e.$message.success({message:"修改状态成功"}),e.getList(),e.statusVisible=!1)})},showNotifyRet:function(e){this.$alert(e.notify_ret,"商户服务器响应内容",{confirmButtonText:"确定",callback:function(e){}})},getSummaries:function(e){var t=e.columns,a=(e.data,[]);return t.forEach(function(e,t){if(0===t)return void(a[t]="当前查询条件总计");a[t]="N/A"}),a[2]=this.summery.amount+"元",a},objectSpanMethod:function(e){var t=(e.row,e.column,e.rowIndex);if(0===e.columnIndex)return t==this.data.data.length?{rowspan:1,colspan:4}:{rowspan:0,colspan:0}},handleFilter:function(){this.listQuery.page=1,this.getList()},handleSizeChange:function(e){this.listQuery.limit=e,this.getList()},handleCurrentChange:function(e){this.listQuery.page=e,this.getList()},timeFilter:function(e){if(!e[0])return this.listQuery.start=void 0,void(this.listQuery.end=void 0);this.listQuery.start=parseInt(+e[0]/1e3),this.listQuery.end=parseInt((+e[1]+864e5)/1e3)},handleEditUser:function(){this.$router.push({name:"vue_merchant_add"})},handleDetail:function(e){this.$router.push({name:"vue_merchant_detail",query:{merchantId:e.id}})},showPasteTxt:function(e){var t="";switch(e){case"orderNo":t="请粘贴订单号";break;case"username":t="请粘贴商户账号";break;case"userId":t="请粘贴商户ID"}this.PasteTxtVal=this.listQuery[e],this.PasteTxtTitle=t,this.PasteTxtField=e,this.PasteTxtVisible=!0},PasteTxt:function(){var e=this.PasteTxtVal.replace(/\n/g,",").replace(/\r/g,"");this.listQuery[this.PasteTxtField]=e,this.PasteTxtVal="",this.PasteTxtField="",this.PasteTxtVisible=!1},close:function(){this.googleCode=null,this.clearGoogleVisible=!1,this.merchant_id=null},handleClearGoogle:function(e){this.clearGoogleVisible=!0,this.merchant_id=e.id},showDetail:function(){},handleMerchantWeb:function(e){this.$set(this,"web_merchant_id",e.id),this.$set(this,"web_merchant_name",e.username)},initMerchantId:function(){this.$set(this,"web_merchant_id",null),this.$set(this,"web_merchant_name",null)}}}},vLXu:function(e,t,a){"use strict";function i(e){a("9Rej")}Object.defineProperty(t,"__esModule",{value:!0});var s=a("FzBT"),n=a.n(s),r=a("V3Zo"),l=a("VU/8"),o=i,c=l(n.a,r.a,!1,o,"data-v-77a68b08",null);t.default=c.exports}});